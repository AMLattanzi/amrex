#!/bin/sh -f

# This script writes an F90 module containing strings with the
# build date, directory, machine, and the list of modules that
# were compiled into the executable.  This information can
# then be written to the plotfiles (in MAESTRO this is done
# in write_job_info.f90).

# script to some information about the build environment
MAX_STRING_LENGTH=128
rm -f build_info.f90


BUILD_DATE=`date | cut -c 1-$MAX_STRING_LENGTH`
BUILD_DIR=`pwd | cut -c 1-$MAX_STRING_LENGTH`
BUILD_MACHINE=`uname -a | cut -c 1-$MAX_STRING_LENGTH`
MODULES=`echo $1 | cut -c 1-$MAX_STRING_LENGTH`

cat > build_info.f90 << EOF
module build_info_module

  implicit none

  character (len=$MAX_STRING_LENGTH), save :: build_date = &
"$BUILD_DATE"

  character (len=$MAX_STRING_LENGTH), save :: build_dir = &
"$BUILD_DIR"

  character (len=$MAX_STRING_LENGTH), save :: build_machine = &
"$BUILD_MACHINE"

  character (len=$MAX_STRING_LENGTH), save :: module_list = &
"$MODULES"

end module build_info_module

EOF



